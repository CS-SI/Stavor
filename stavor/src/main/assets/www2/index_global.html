<!doctype html>
<html lang="en">
<head>
	<title>STAVOR</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, height=device-height, target-densitydpi=device-dpi, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="icon" href="style/icons/capsule.png" />
	<link rel="stylesheet" href="style/css/main.css"/>
	<link rel="stylesheet" href="style/css/toolbar.css"/>
	<link rel="stylesheet" href="style/css/tabs.css"/>
	<link rel="stylesheet" href="style/css/missions.css"/>
	<link rel="stylesheet" href="style/css/views.css"/>
	<link rel="stylesheet" href="style/css/map.css"/>
	<link rel="stylesheet" href="style/css/leds.css"/>
    <link rel="stylesheet" href="style/css/OpenLayers/style.css" type="text/css">
    <link rel="stylesheet" href="style/css/OpenLayers/style.mobile.css" type="text/css">
	
	<!-- IntelXDK -->
	<!--<script src='intelxdk.js'></script>-->
    <!--<script src='xhr.js'></script>--><!-- Same origin policy -->
	
	<!-- jQuery -->
	<script type='text/javascript' src="js/jQuery/jquery-2.1.3.min.js"></script>
	<!-- PouchDB -->
	<script type='text/javascript' src="js/PouchDB/pouchdb-3.2.1.min.js"></script>
	<!-- ThreeJS -->
	<script type='text/javascript' src="js/ThreeJS/three.js"></script>
	<script type='text/javascript' src="js/ThreeJS/three.ext.js"></script>	
	<script type='text/javascript' src='js/ThreeJS/extensions/threex.planets.js'></script>
	<script type='text/javascript' src='js/ThreeJS/extensions/threex.atmospherematerial.js'></script>
	<script type='text/javascript' src="js/ThreeJS/extensions/threex.atmospheredatgui.js"></script>
	<script type='text/javascript' src="js/ThreeJS/extras/Detector.js"></script>
	<script type='text/javascript' src="js/ThreeJS/extras/Stats.js"></script>
	<!--<script src="js/OrbitControls.js"></script>-->
	<script type='text/javascript' src="js/ThreeJS/extras/TrackballControls.js"></script>
	<!--<script src="js/THREEx.KeyboardState.js"></script>
	<script src="js/THREEx.FullScreen.js"></script>
	<script src="js/THREEx.WindowResize.js"></script>-->
	<script type='text/javascript' src='js/ThreeJS/extras/DAT.GUI.min.js'></script>
	<script type='text/javascript' src="js/ThreeJS/shaders/ShaderEngine.js"></script><!-- SC engine plasma -->
	<script type='text/javascript' src="js/ThreeJS/shaders/ShaderGlow.js"></script><!-- Sun glow effect -->
	<script type='text/javascript' src="js/ThreeJS/shaders/ShaderSun.js"></script><!-- Sun surface -->
	
	<!-- OpenLayers -->
	<!--<script type='text/javascript' src="js/OpenLayers/OpenLayers.js"></script>-->
	<script type='text/javascript' src="js/OpenLayers/OpenLayers.mobile.js"></script>
	
	<!-- Orekit -->
	<script type='text/javascript' src="modules/simulator/orekit/orekit-data.js"></script>
	<!-- Stavor -->
	<script type='text/javascript' src="js/Stavor/parameters.js"></script>
	<script type='text/javascript' src="js/Stavor/constants.js"></script>
	<script type='text/javascript' src="js/Stavor/enums.js"></script>
	<script type='text/javascript' src="js/Stavor/variables.js"></script>
	<script type='text/javascript' src="js/Stavor/menus.js"></script>
	
	<script type='text/javascript' src="modules/simulator/components/Mission.js"></script>
	<script type='text/javascript' src="modules/simulator/components/Orbit.js"></script>
	<script type='text/javascript' src="db/missions.js"></script>
	
	<script type="text/javascript"><!-- GLOBAL FUNCTIONS -->
		var global_orbit, global_attitude, global_map;
		window.onload = function () { 
			global_attitude = new Attitude();
			global_orbit = new Orbit();
			global_map = new Map();
			initVisualizations();
			/*changeVisualization(enum_visualizations.ATTITUDE);
			global_attitude.resizeCanvas();
			global_orbit.resizeCanvas();
			global_map.resizeCanvas();*/
			
			initializeAttitudeMenu();
			initializeOrbitMenu();
			initializeMapMenu();
			
			loadOrekitFilesText();
			hideSplash();
		}
		
		function error(text){
			alert(text);
		}
		function pushSimulationState(state){
			global_simulation.results = state;
		}
		
		//SplashScreen
		function hideSplash(){
			setTimeout(function() { 					
				var div_splash = document.getElementById("Splash");
				div_splash.style.visibility = "hidden";
				div_splash.style.opacity = "0";
			}, 3000);
		}
		
		function initVisualizations(){
			global_current_visualization = enum_visualizations.ATTITUDE;
			updateLeds();
		}
		function updateLeds(){
			var led_attitude = document.getElementById("LedAttitude");
			var led_orbit = document.getElementById("LedOrbit");
			var led_map = document.getElementById("LedMap");
			
			if(global_current_visualization == enum_visualizations.ATTITUDE){
				led_attitude.className = "Led LedSelected";
				led_orbit.className = "Led LedUnselected";
				led_map.className = "Led LedUnselected";
			}else if(global_current_visualization == enum_visualizations.ORBIT){
				led_attitude.className = "Led LedUnselected";
				led_orbit.className = "Led LedSelected";
				led_map.className = "Led LedUnselected";
			}else if(global_current_visualization == enum_visualizations.MAP){
				led_attitude.className = "Led LedUnselected";
				led_orbit.className = "Led LedUnselected";
				led_map.className = "Led LedSelected";
			}else{
				error("ERROR: updateLeds(): the current visualization enum is not recognized.");
			}
		}
		function prevVisualization(){
			var div_attitude = document.getElementById("DivAttitude");
			var div_orbit = document.getElementById("DivOrbit");
			var div_map = document.getElementById("DivMap");
			
			var new_vis = enum_visualizations.ATTITUDE;
			if(global_current_visualization == enum_visualizations.ATTITUDE){
				div_attitude.style.display = "block";
				div_orbit.style.display = "none";
				div_map.style.display = "block";
				//Slide out Attitude
				$('#DivAttitude').animate({
					right: '-100%'
				},"slow");
				//Slide in Map
				div_map.style.right = "100%"; 
				$('#DivMap').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.MAP;
			}else if(global_current_visualization == enum_visualizations.ORBIT){
				div_attitude.style.display = "block";
				div_orbit.style.display = "block";
				div_map.style.display = "none";
				//Slide out Orbit
				$('#DivOrbit').animate({
					right: '-100%'
				},"slow");
				//Slide in Attitude
				div_attitude.style.right = "100%"; 
				$('#DivAttitude').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.ATTITUDE;
			}else if(global_current_visualization == enum_visualizations.MAP){
				div_attitude.style.display = "none";
				div_orbit.style.display = "block";
				div_map.style.display = "block";
				//Slide out Map
				$('#DivMap').animate({
					right: '-100%'
				},"slow");
				//Slide in Orbit
				div_orbit.style.right = "100%"; 
				$('#DivOrbit').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.ORBIT;
			}else{
				error("ERROR: prevVisualization(): the current visualization enum is not recognized.");
			}
			global_current_visualization = new_vis;
			updateLeds();
		}
		function nextVisualization(){
			var div_attitude = document.getElementById("DivAttitude");
			var div_orbit = document.getElementById("DivOrbit");
			var div_map = document.getElementById("DivMap");
			
			var new_vis = enum_visualizations.ATTITUDE;
			if(global_current_visualization == enum_visualizations.ATTITUDE){
				div_attitude.style.display = "block";
				div_orbit.style.display = "block";
				div_map.style.display = "none";
				//Slide out Attitude
				$('#DivAttitude').animate({
					right: '100%'
				},"slow");
				//Slide in Orbit
				div_orbit.style.right = "-100%"; 
				$('#DivOrbit').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.ORBIT;
			}else if(global_current_visualization == enum_visualizations.ORBIT){
				div_attitude.style.display = "none";
				div_orbit.style.display = "block";
				div_map.style.display = "block";
				//Slide out Orbit
				$('#DivOrbit').animate({
					right: '100%'
				},"slow");
				//Slide in Map
				div_map.style.right = "-100%"; 
				$('#DivMap').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.MAP;
			}else if(global_current_visualization == enum_visualizations.MAP){
				div_attitude.style.display = "block";
				div_orbit.style.display = "none";
				div_map.style.display = "block";
				//Slide out Map
				$('#DivMap').animate({
					right: '100%'
				},"slow");
				//Slide in Attitude
				div_attitude.style.right = "-100%"; 
				$('#DivAttitude').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.ATTITUDE;
			}else{
				error("ERROR: nextVisualization(): the current visualization enum is not recognized.");
			}
			global_current_visualization = new_vis;
			updateLeds();
		}
		function switchMissionsListStatus(){
			if(global_missions_list_is_open){
				$('#DivMissions').animate({
					left: '-300px'
				},"slow");
			}else{
				$('#DivMissions').animate({
					left: '0px'
				},"slow");
			}
			global_missions_list_is_open = !global_missions_list_is_open;
		}
		
	</script>
</head>
<body>

<div id="Splash"></div>


<div id="DivMap" >
	<div id="map" ></div>
	<div id="MaptabContainer" class="tabContainer">
		<div id="Maptabs" class="tabs">
		  <ul>
			<li id="MaptabHeader_1">Page 1</li>
			<li id="MaptabHeader_2">Page 2</li>
			<li id="MaptabHeader_3">Page 3</li>
		  </ul>
		</div>
		<div id="Maptabscontent" class="tabscontent">
		  <div class="tabpage" id="Maptabpage_1">
			<h2>Page 1</h2>
			<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. 
			  Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum 
			  erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui.
			  Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat 
			  volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus. </p>
		  </div>
		  <div class="tabpage" id="Maptabpage_2">
			<h2>Page 2</h2>
			<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. 
			  Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. </p>
			<p>Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus 
			lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. </p>
			<p> Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, 
			accumsan porttitor, facilisis luctus, metus. </p>
		  </div>
		  <div class="tabpage" id="Maptabpage_3">
			<h2>Page 3</h2>
			<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. </p>
			<p>Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris 
			placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, 
			elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui.</p>
			<p>Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam 
			erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus. </p>
		  </div>
		</div>
	</div>
	<div id="MenuButtonMap" class="MenuButton" onclick="switchMapMenu()" ></div>
</div>
<div id="DivOrbit" >
	<div id="orbit" ></div>
	<div id="OrbittabContainer" class="tabContainer">
		<div id="Orbittabs" class="tabs">
		  <ul>
			<li id="OrbittabHeader_1">Page 1</li>
			<li id="OrbittabHeader_2">Page 2</li>
			<li id="OrbittabHeader_3">Page 3</li>
		  </ul>
		</div>
		<div id="Orbittabscontent" class="tabscontent">
		  <div class="tabpage" id="Orbittabpage_1">
			<h2>Page 1</h2>
			<p>Pellentesque  </p>
		  </div>
		  <div class="tabpage" id="Orbittabpage_2">
			<h2>Page 2</h2>
			<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. 
			  Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. </p>
		  </div>
		  <div class="tabpage" id="Orbittabpage_3">
			<h2>Page 3</h2>
			<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. </p>
		  </div>
		</div>
	</div>
	<div id="MenuButtonOrbit" class="MenuButton" onclick="switchOrbitMenu()" ></div>
</div>
<div id="DivAttitude" >
	<div id="attitude" ></div>
	<div id="AttitudetabContainer" class="tabContainer">
		<div id="Attitudetabs" class="tabs">
		  <ul>
			<li id="AttitudetabHeader_1">Page 1</li>
			<li id="AttitudetabHeader_2">Page 2</li>
			<li id="AttitudetabHeader_3">Page 3</li>
		  </ul>
		</div>
		<div id="Attitudetabscontent" class="tabscontent">
		  <div class="tabpage" id="Attitudetabpage_1">
			<h2>Page 1</h2>
			<p>Pellentesque  </p>
		  </div>
		  <div class="tabpage" id="Attitudetabpage_2">
			<h2>Page 2</h2>
			<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. 
			  Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. </p>
		  </div>
		  <div class="tabpage" id="Attitudetabpage_3">
			<h2>Page 3</h2>
			<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. </p>
		  </div>
		</div>
	</div>
	<div id="MenuButtonAttitude" class="MenuButton" onclick="switchAttitudeMenu()" ></div>
</div>

<div id="DivMenu" ></div>

<div id="SlidePrev" onclick="prevVisualization()" ></div>
<div id="SlideNext" onclick="nextVisualization()" ></div>

<div id="DivToolbar" >
	<input id="PlayButton" class="SimControl" type="image" src="style/icons/play.png" title="Play/Pause simulator"/>
	<input id="StopButton" class="SimControl" type="image" src="style/icons/stop.png" title="Stop simulator"/>
	<input id="TimeBar" type="range" min="0" max="100" value="0" disabled="true" title="Simulation time"/>
	<input id="AccelButton" class="SimControlLeft" type="image" src="style/icons/accelerate.png" title="Accelerate simulation"/>
	<input id="SlowButton" class="SimControlRight" type="image" src="style/icons/slow.png" title="Slow down simulation"/>&nbsp;
	<input id="ReverseButton" class="SimControlLeft" type="image" src="style/icons/reverse.png" title="Reverse simulation"/>
	<input id="ForwardButton" class="SimControlRight" type="image" src="style/icons/forward.png" title="Forward simulation"/>&nbsp;&nbsp;
</div>
<div id="DivClock" >
	<input id="MissionsListButton" class="" type="image" src="style/icons/list.png" title="Mission list" onclick="switchMissionsListStatus()"/>&nbsp;2014-01-01 20:00:33.1 UTC&nbsp;
</div>
<div id="LedMap" class="Led LedUnselected"/>
<div id="LedOrbit" class="Led LedUnselected"/>
<div id="LedAttitude" class="Led LedUnselected"/>

<div id="DivMissions">
	<input id="MissionsListClose" class="" type="image" src="style/icons/close.png" title="Close mission list" onclick="switchMissionsListStatus()"/>
	<h3 id="TitleMissions">Missions</h3>	
	<div id="ListMissions">
		<ol id="olListMissions">
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		  <li>Coffee</li>
		  <li>Milk</li>
		</ol>
	</div>
	<div id="MissionsMenu">
		<div class="MissionsMenuItem"><input class="MissionsMenuButton" type="image" src="style/icons/select.png" title="Select Mission" onclick=""/></div>
		<div class="MissionsMenuItem"><input class="MissionsMenuButton" type="image" src="style/icons/new.png" title="Create Mission" onclick=""/></div>
		<div class="MissionsMenuItem"><input class="MissionsMenuButton" type="image" src="style/icons/edit.png" title="Edit Mission" onclick=""/></div>
		<div class="MissionsMenuItem"><input class="MissionsMenuButton" type="image" src="style/icons/delete.png" title="Remove Mission" onclick=""/></div>
	</div>
</div>

<!-- Modules -->
	<!-- Attitude -->
	<script type='text/javascript' src="modules/attitude/attitude.js"></script>
	<!-- Orbit -->
	<script type='text/javascript' src="modules/orbit/orbit.js"></script>
	<!-- Map -->
	<script type='text/javascript' src="modules/map/map.js"></script>
</body>
</html>
