<!doctype html>
<html lang="en">
<head>
	<title>STAVOR</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, height=device-height, target-densitydpi=device-dpi, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="icon" href="style/icons/capsule.png" />
	<link rel="stylesheet" href="style/css/main.css"/>
	<link rel="stylesheet" href="style/css/views.css"/>
	<link rel="stylesheet" href="style/css/leds.css"/>
    <link rel="stylesheet" href="style/css/OpenLayers/style.css" type="text/css">
    <link rel="stylesheet" href="style/css/OpenLayers/style.mobile.css" type="text/css">
	
	<!-- IntelXDK -->
	<!--<script src='intelxdk.js'></script>-->
    <!--<script src='xhr.js'></script>--><!-- Same origin policy -->
	
	<!-- jQuery -->
	<script type='text/javascript' src="js/jQuery/jquery-2.1.3.min.js"></script>
	<!-- ThreeJS -->
	<script type='text/javascript' src="js/ThreeJS/three.js"></script>
	<script type='text/javascript' src="js/ThreeJS/three.ext.js"></script>	
	<script type='text/javascript' src='js/ThreeJS/extensions/threex.planets.js'></script>
	<script type='text/javascript' src='js/ThreeJS/extensions/threex.atmospherematerial.js'></script>
	<script type='text/javascript' src="js/ThreeJS/extensions/threex.atmospheredatgui.js"></script>
	<script type='text/javascript' src="js/ThreeJS/extras/Detector.js"></script>
	<script type='text/javascript' src="js/ThreeJS/extras/Stats.js"></script>
	<!--<script src="js/OrbitControls.js"></script>-->
	<script type='text/javascript' src="js/ThreeJS/extras/TrackballControls.js"></script>
	<!--<script src="js/THREEx.KeyboardState.js"></script>
	<script src="js/THREEx.FullScreen.js"></script>
	<script src="js/THREEx.WindowResize.js"></script>-->
	<script type='text/javascript' src='js/ThreeJS/extras/DAT.GUI.min.js'></script>
	<script type='text/javascript' src="js/ThreeJS/shaders/ShaderEngine.js"></script><!-- SC engine plasma -->
	<script type='text/javascript' src="js/ThreeJS/shaders/ShaderGlow.js"></script><!-- Sun glow effect -->
	<script type='text/javascript' src="js/ThreeJS/shaders/ShaderSun.js"></script><!-- Sun surface -->
	
	<!-- OpenLayers -->
	<!--<script type='text/javascript' src="js/OpenLayers/OpenLayers.js"></script>-->
	<script type='text/javascript' src="js/OpenLayers/OpenLayers.mobile.js"></script>
	
	<!-- Stavor -->
	<script type='text/javascript' src="js/Stavor/parameters.js"></script>
	<script type='text/javascript' src="js/Stavor/constants.js"></script>
	<script type='text/javascript' src="js/Stavor/enums.js"></script>
	<script type='text/javascript' src="js/Stavor/variables.js"></script>
	
	<script type="text/javascript"><!-- GLOBAL FUNCTIONS -->
		var global_orbit, global_attitude, global_map;
		window.onload = function () { 
			global_attitude = new Attitude();
			global_orbit = new Orbit();
			global_map = new Map();
			initVisualizations();
			/*changeVisualization(enum_visualizations.ATTITUDE);
			global_attitude.resizeCanvas();
			global_orbit.resizeCanvas();
			global_map.resizeCanvas();*/
			
			hideSplash();
		}
		function error(text){
			alert(text);
		}
		function pushSimulationState(state){
			global_simulation.results = state;
		}
		
		//SplashScreen
		function hideSplash(){
			setTimeout(function() { 					
				var div_splash = document.getElementById("Splash");
				div_splash.style.visibility = "hidden";
				div_splash.style.opacity = "0";
			}, 3000);
		}
		//Loading screen
		/*var isLoading = false;
		function setLoading(){
			var div_loading = document.getElementById("Loading");
			div_loading.style.visibility = "visible";
			div_loading.style.opacity = "1";
		}
		function setLoaded(delay){
			if(typeof(delay) == undefined) delay = 0; 
			setTimeout(function() { 					
				var div_loading = document.getElementById("Loading");
				div_loading.style.visibility = "hidden";
				div_loading.style.opacity = "0";
			}, delay);
		}*/
		function initVisualizations(){
			global_current_visualization = enum_visualizations.ATTITUDE;
			updateLeds();
		}
		function updateLeds(){
			var led_attitude = document.getElementById("LedAttitude");
			var led_orbit = document.getElementById("LedOrbit");
			var led_map = document.getElementById("LedMap");
			
			if(global_current_visualization == enum_visualizations.ATTITUDE){
				led_attitude.className = "Led LedSelected";
				led_orbit.className = "Led LedUnselected";
				led_map.className = "Led LedUnselected";
			}else if(global_current_visualization == enum_visualizations.ORBIT){
				led_attitude.className = "Led LedUnselected";
				led_orbit.className = "Led LedSelected";
				led_map.className = "Led LedUnselected";
			}else if(global_current_visualization == enum_visualizations.MAP){
				led_attitude.className = "Led LedUnselected";
				led_orbit.className = "Led LedUnselected";
				led_map.className = "Led LedSelected";
			}else{
				error("ERROR: updateLeds(): the current visualization enum is not recognized.");
			}
		}
		function prevVisualization(){
			var div_attitude = document.getElementById("DivAttitude");
			var div_orbit = document.getElementById("DivOrbit");
			var div_map = document.getElementById("map");
			
			var new_vis = enum_visualizations.ATTITUDE;
			if(global_current_visualization == enum_visualizations.ATTITUDE){
				//Slide out Attitude
				$('#DivAttitude').animate({
					right: '-100%'
				},"slow");
				//Slide in Map
				div_map.style.right = "100%"; 
				$('#map').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.MAP;
			}else if(global_current_visualization == enum_visualizations.ORBIT){
				//Slide out Orbit
				$('#DivOrbit').animate({
					right: '-100%'
				},"slow");
				//Slide in Attitude
				div_attitude.style.right = "100%"; 
				$('#DivAttitude').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.ATTITUDE;
			}else if(global_current_visualization == enum_visualizations.MAP){
				//Slide out Map
				$('#map').animate({
					right: '-100%'
				},"slow");
				//Slide in Orbit
				div_orbit.style.right = "100%"; 
				$('#DivOrbit').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.ORBIT;
			}else{
				error("ERROR: prevVisualization(): the current visualization enum is not recognized.");
			}
			global_current_visualization = new_vis;
			updateLeds();
		}
		function nextVisualization(){
			var div_attitude = document.getElementById("DivAttitude");
			var div_orbit = document.getElementById("DivOrbit");
			var div_map = document.getElementById("map");
			
			var new_vis = enum_visualizations.ATTITUDE;
			if(global_current_visualization == enum_visualizations.ATTITUDE){
				//Slide out Attitude
				$('#DivAttitude').animate({
					right: '100%'
				},"slow");
				//Slide in Orbit
				div_orbit.style.right = "-100%"; 
				$('#DivOrbit').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.ORBIT;
			}else if(global_current_visualization == enum_visualizations.ORBIT){
				//Slide out Orbit
				$('#DivOrbit').animate({
					right: '100%'
				},"slow");
				//Slide in Map
				div_map.style.right = "-100%"; 
				$('#map').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.MAP;
			}else if(global_current_visualization == enum_visualizations.MAP){
				//Slide out Map
				$('#map').animate({
					right: '100%'
				},"slow");
				//Slide in Attitude
				div_attitude.style.right = "-100%"; 
				$('#DivAttitude').animate({
					right: '0'
				},"slow");
				new_vis = enum_visualizations.ATTITUDE;
			}else{
				error("ERROR: nextVisualization(): the current visualization enum is not recognized.");
			}
			global_current_visualization = new_vis;
			updateLeds();
		}
		/*function changeVisualization(lenum_visualization) {
			var div_attitude = document.getElementById("DivAttitude");
			var div_orbit = document.getElementById("DivOrbit");
			var div_map = document.getElementById("map");
			
			if(lenum_visualization == enum_visualizations.ATTITUDE && global_current_visualization != enum_visualizations.ATTITUDE){
				//Visibility
				//div_attitude.style.display = "block";
				//div_orbit.style.display = "none";
				//div_map.style.display = "none";
				//Position
				div_attitude.className = "AttitudeToCurrent"
				div_attitude.style.width = "100%";
				div_attitude.style.height = "100%";
				div_attitude.style.right = "0";
				div_attitude.style.bottom = "0";
				div_attitude.style.zIndex = "1";
				
				div_orbit.className = "OrbitToMiniature"
				div_orbit.style.width = "10%";
				div_orbit.style.height = "10%";
				div_orbit.style.right = "1%";
				div_orbit.style.bottom = "1%";
				div_orbit.style.zIndex = "2";
				
				div_map.className = "MapToMiniature"
				div_map.style.width = "10%";
				div_map.style.height = "10%";
				div_map.style.right = "12%";
				div_map.style.bottom = "1%";
				div_map.style.zIndex = "2";
				
				//global_attitude.resizeCanvas();
				global_current_visualization = lenum_visualization;
			}else if(lenum_visualization == enum_visualizations.ORBIT && global_current_visualization != enum_visualizations.ORBIT){
				//Visibility
				//div_attitude.style.display = "none";
				//div_orbit.style.display = "block";
				//div_map.style.display = "none";
				//Position
				div_orbit.className = "OrbitToCurrent"
				div_orbit.style.width = "100%";
				div_orbit.style.height = "100%";
				div_orbit.style.right = "0";
				div_orbit.style.bottom = "0";
				div_orbit.style.zIndex = "1";
				
				div_map.className = "MapToMiniature"
				div_map.style.width = "10%";
				div_map.style.height = "10%";
				div_map.style.right = "1%";
				div_map.style.bottom = "1%";
				div_map.style.zIndex = "2";
				
				div_attitude.className = "AttitudeToMiniature"
				div_attitude.style.width = "10%";
				div_attitude.style.height = "10%";
				div_attitude.style.right = "12%";
				div_attitude.style.bottom = "1%";
				div_attitude.style.zIndex = "2";
				
				global_current_visualization = lenum_visualization;
				//global_orbit.resizeCanvas();
			}else if(lenum_visualization == enum_visualizations.MAP && global_current_visualization != enum_visualizations.MAP){
				//Visibility
				//div_attitude.style.display = "none";
				//div_orbit.style.display = "none";
				//div_map.style.display = "block";
				//Position
				div_map.className = "MapToCurrent"
				div_map.style.width = "100%";
				div_map.style.height = "100%";
				div_map.style.right = "0";
				div_map.style.bottom = "0";
				div_map.style.zIndex = "1";
				
				div_attitude.className = "AttitudeToMiniature"
				div_attitude.style.width = "10%";
				div_attitude.style.height = "10%";
				div_attitude.style.right = "1%";
				div_attitude.style.bottom = "1%";
				div_attitude.style.zIndex = "2";
				
				div_orbit.className = "OrbitToMiniature"
				div_orbit.style.width = "10%";
				div_orbit.style.height = "10%";
				div_orbit.style.right = "12%";
				div_orbit.style.bottom = "1%";
				div_orbit.style.zIndex = "2";
				
				global_current_visualization = lenum_visualization;
				//global_map.resizeCanvas();
			}else{
				if(global_current_visualization != lenum_visualization){
					error("ERROR: changeVisualization(): the provided visualization enum is not recognized.");
				}
			}
		}*/
	</script>
</head>
<body>

<div id="Splash"></div>


<div id="map" ></div>
<div id="DivOrbit" ></div>
<div id="DivAttitude" ></div>

<div id="DivMenu" ></div>

<div id="SlidePrev" onclick="prevVisualization()" ></div>
<div id="SlideNext" onclick="nextVisualization()" ></div>

<div id="DivToolbar" >
	<input id="PlayButton" class="SimControl" type="image" src="style/icons/play.png" title="Play/Pause simulator"/>
	<input id="StopButton" class="SimControl" type="image" src="style/icons/stop.png" title="Stop simulator"/>
	<input id="TimeBar" type="range" min="0" max="100" value="0" disabled="true" title="Simulation time"/>
	<input id="AccelButton" class="SimControlLeft" type="image" src="style/icons/accelerate.png" title="Accelerate simulation"/>
	<input id="SlowButton" class="SimControlRight" type="image" src="style/icons/slow.png" title="Slow down simulation"/>&nbsp;
	<input id="ReverseButton" class="SimControlLeft" type="image" src="style/icons/reverse.png" title="Reverse simulation"/>
	<input id="ForwardButton" class="SimControlRight" type="image" src="style/icons/forward.png" title="Forward simulation"/>&nbsp;&nbsp;
</div>
<div id="DivClock" >2014-01-01 20:00:33.1 UTC</div>
<div id="LedMap" class="Led LedUnselected"/>
<div id="LedOrbit" class="Led LedUnselected"/>
<div id="LedAttitude" class="Led LedUnselected"/>

<!-- Modules -->
	<!-- Attitude -->
	<script type='text/javascript' src="modules/attitude/attitude.js"></script>
	<!-- Orbit -->
	<script type='text/javascript' src="modules/orbit/orbit.js"></script>
	<!-- Map -->
	<script type='text/javascript' src="modules/map/map.js"></script>
</body>
</html>
